(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{163:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var r=l(2115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(e,t)=>{let l=(0,r.forwardRef)((l,s)=>{let{color:n="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:u,...f}=l;return(0,r.createElement)("svg",{ref:s,...a,width:c,height:c,stroke:n,strokeWidth:i?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),d].join(" "),...f},[...t.map(e=>{let[t,l]=e;return(0,r.createElement)(t,l)}),...Array.isArray(u)?u:[u]])});return l.displayName="".concat(e),l}},1038:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>M});var r=l(5155),a=l(2115),s=l(4477);let n=(0,s.createServerReference)("6021a7c1113b9c84a8dce535861660dd8a0dd23709",s.callServer,void 0,s.findSourceMapURL,"listDirectory"),c=(0,s.createServerReference)("6036fb887565ffc589300d67251880d5da167f8c9f",s.callServer,void 0,s.findSourceMapURL,"deleteFile"),o=(0,s.createServerReference)("60e367ce668b8c6b2ec42ae5bbcd0bf426e0f1c14d",s.callServer,void 0,s.findSourceMapURL,"downloadFile"),i=(0,s.createServerReference)("700e78d8175ce38e76ef0290b91c680a9c2490f158",s.callServer,void 0,s.findSourceMapURL,"compressFiles"),d=(0,s.createServerReference)("70c58c4f3af09564db481ffebe180d254e332d5c74",s.callServer,void 0,s.findSourceMapURL,"extractFile"),u=(0,s.createServerReference)("605dc03a7135e7d1e26b464b2d06966f7b5e425b16",s.callServer,void 0,s.findSourceMapURL,"createDirectory"),f=(0,s.createServerReference)("607f81f8c8b4d00adb5a08c72637edc7547f3bba2e",s.callServer,void 0,s.findSourceMapURL,"createFile");function h(e){let{path:t,onNavigate:l}=e,[s,n]=(0,a.useState)(!1),[c,o]=(0,a.useState)(t),i=(0,a.useRef)(null),d=(0,a.useRef)(!1),u=t.split("/").filter(Boolean),f="",h=e=>{"key"in e&&"Enter"!==e.key||(n(!1),c!==t&&l(c))};return s?(0,r.jsx)("input",{ref:i,className:"px-1.5 py-0.5 rounded border border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200 text-xs w-full max-w-xs",value:c,onChange:e=>{o(e.target.value)},onBlur:e=>{if(d.current){d.current=!1;return}h(e)},onKeyDown:h,autoFocus:!0}):(0,r.jsxs)("nav",{className:"flex items-center space-x-0.5 text-xs select-none",onDoubleClick:()=>{o(t),n(!0),setTimeout(()=>{i.current&&(i.current.focus(),d.current=!0)},0)},title:"Double-click to edit path",children:[(0,r.jsx)("button",{className:"px-1.5 py-0.5 rounded-full ".concat("/"===t?"bg-blue-100 text-blue-700 font-semibold":"hover:bg-gray-100 text-gray-700"),onClick:()=>l("/"),children:"/"}),u.map((e,t)=>{f+="/"+e;let a=t===u.length-1;return(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-3 h-3 text-gray-300 mx-0.5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M9 5l7 7-7 7"})}),(0,r.jsx)("button",{className:"px-1.5 py-0.5 rounded-full ".concat(a?"bg-blue-100 text-blue-700 font-semibold":"hover:bg-gray-100 text-gray-700"),onClick:()=>l(f),disabled:a,children:e})]},t)})]})}let x=(0,s.createServerReference)("785ba87148ef017813c6a43531db9c34cec7b401ae",s.callServer,void 0,s.findSourceMapURL,"uploadFile");function m(e){let{currentPath:t,onUpload:l,setUploadProgress:s}=e,n=(0,a.useRef)(null),[c,o]=(0,a.useState)(""),[i,d]=(0,a.useState)(null),[u,f]=(0,a.useState)(!1),h=async e=>{if(e&&0!==e.length){o("");for(let r=0;r<e.length;++r){let a=e[r];if(a.size>0x280000000){o("File size exceeds 10GB limit.");continue}d(0),f(!0),s({name:a.name,percent:0});let n=sessionStorage.getItem("ssh-credentials");if(!n){o("No SSH credentials found."),d(null),f(!1),s(null);return}let c=JSON.parse(n),i=new FileReader;i.onload=async e=>{var r;let n=(null==(r=e.target)?void 0:r.result).split(",")[1],i=0,u=setInterval(()=>{d(Math.min(i+=10,95)),s({name:a.name,percent:Math.min(i,95)})},100),h=await x(c,t,a.name,n);clearInterval(u),d(100),s({name:a.name,percent:100}),h.success?l():o(h.error||"Failed to upload file."),setTimeout(()=>{d(null),s(null),f(!1)},800)},i.onerror=()=>{o("Failed to read file."),d(null),f(!1),s(null)},i.readAsDataURL(a)}}};return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"btn",onClick:e=>{var t;e.stopPropagation(),null==(t=n.current)||t.click()},disabled:u,children:u&&null!==i?"Uploading ".concat(i,"%"):"Upload"}),(0,r.jsx)("input",{type:"file",ref:n,style:{display:"none"},onChange:e=>{h(e.target.files)},multiple:!0}),c&&(0,r.jsx)("div",{className:"text-yellow-800 bg-yellow-100 border border-yellow-300 rounded-sm px-2 py-1 ml-2",children:c})]})}var p=l(163);let b=(0,p.A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var y=l(1380);let g=(0,p.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),v=(0,p.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var w=l(3904);let N=(0,p.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),j=(0,p.A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),k=(0,p.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),S=[{label:"Home",path:"/home",icon:(0,r.jsx)(b,{className:"w-4 h-4 mr-2"})},{label:"Root",path:"/",icon:(0,r.jsx)(y.A,{className:"w-4 h-4 mr-2"})},{label:"etc",path:"/etc",icon:(0,r.jsx)(y.A,{className:"w-4 h-4 mr-2"})},{label:"var",path:"/var",icon:(0,r.jsx)(y.A,{className:"w-4 h-4 mr-2"})},{label:"mnt",path:"/mnt",icon:(0,r.jsx)(y.A,{className:"w-4 h-4 mr-2"})},{label:"media",path:"/media",icon:(0,r.jsx)(y.A,{className:"w-4 h-4 mr-2"})}];function C(e){let{x:t,y:l,file:s,selected:n,onAction:c,onClose:o}=e,i=n.length>1,d=(0,a.useRef)(null);return(0,r.jsxs)("div",{ref:d,className:"fixed z-50 bg-white border rounded shadow-lg text-sm",style:{left:t,top:l,minWidth:160},onContextMenu:e=>e.preventDefault(),children:[(0,r.jsx)("div",{className:"px-3 py-2 font-semibold border-b",children:i?"".concat(n.length," items"):null==s?void 0:s.name}),(0,r.jsx)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>c("extract"),children:"Extract"}),(0,r.jsx)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>c("compress"),children:"Compress"}),(0,r.jsx)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>c("download"),children:"Download"}),(0,r.jsx)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>c("delete"),children:"Delete"}),(0,r.jsx)("div",{className:"border-t my-1"}),(0,r.jsx)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>c("new-folder"),children:"New Folder"}),(0,r.jsx)("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>c("new-file"),children:"New File"})]})}function M(){var e,t,l;let[s,x]=(0,a.useState)("/"),[p,M]=(0,a.useState)([]),[A,R]=(0,a.useState)(!0),[L,F]=(0,a.useState)(""),[E,D]=(0,a.useState)(0),[z,H]=(0,a.useState)([]),[U,B]=(0,a.useState)(null);a.useRef(null);let[P,O]=(0,a.useState)(null),[_,W]=(0,a.useState)(""),[q,I]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{R(!0),F("");try{let t=sessionStorage.getItem("ssh-credentials");if(!t){F("No SSH credentials found."),R(!1);return}let l=JSON.parse(t),r=await n(l,s);if(r.success){var e;M((null==(e=r.data)?void 0:e.files)||[])}else F(r.error||"Failed to list directory.")}catch(e){F("Failed to list directory.")}finally{R(!1)}})()},[s,E]);let T=(e,t)=>{t&&(".."===e?x("/"+s.split("/").filter(Boolean).slice(0,-1).join("/")):x("/"===s?"/".concat(e):"".concat(s,"/").concat(e)))},Z=()=>{D(e=>e+1)};a.useEffect(()=>{if(!U)return;let e=e=>{let t=document.querySelector(".fixed.z-50.bg-white.border.rounded.shadow-lg.text-sm");t&&t.contains(e.target)||B(null)},t=e=>{"Escape"===e.key&&B(null)};return window.addEventListener("mousedown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("keydown",t)}},[U]);let J=async(e,t)=>{B(null);let l=sessionStorage.getItem("ssh-credentials");if(!l)return alert("No SSH credentials found.");let r=JSON.parse(l),a=[];(null==t?void 0:t.selection)&&t.selection.length>0?a=t.selection:(null==t?void 0:t.file)?a=[t.file.name]:z.length>0?a=z:(null==U?void 0:U.file)&&(a=[U.file.name]);let n=a.map(e=>"/"===s?"/".concat(e):"".concat(s,"/").concat(e));try{if("delete"===e){if(confirm("Are you sure you want to delete these files?")){if(0===n.length)return alert("No file(s) selected.");let e=await c(r,n);e.success||alert(e.error)}}else if("download"===e){if(0===n.length)return alert("No file(s) selected.");for(let e of n){let t=await o(r,e);if(t.success&&t.data){let e=document.createElement("a");e.href="data:application/octet-stream;base64,".concat(t.data.content),e.download=t.data.name,e.click()}else alert(t.error)}}else if("compress"===e){if(0===n.length)return alert("No file(s) selected.");let e=prompt("Archive name (e.g. files.tar.gz):","archive.tar.gz");if(!e)return;let t="/"===s?"/".concat(e):"".concat(s,"/").concat(e),l=await i(r,n,t);l.success||alert(l.error)}else if("extract"===e){let e="";if(!(e=n.length>0?n[0]:(null==U?void 0:U.file)?"/"===s?"/".concat(U.file.name):"".concat(s,"/").concat(U.file.name):""))return alert("No archive selected.");let t=prompt("Extract to directory:",s);if(!t)return;let l=await d(r,e,t);l.success||alert(l.error)}else if("new-folder"===e){let e=prompt("New folder name:");if(!e)return;let t="/"===s?"/".concat(e):"".concat(s,"/").concat(e),l=await u(r,t);l.success||alert(l.error)}else if("new-file"===e){let e=prompt("New file name:");if(!e)return;let t="/"===s?"/".concat(e):"".concat(s,"/").concat(e),l=await f(r,t);l.success||alert(l.error)}}catch(e){alert((null==e?void 0:e.message)||"Action failed")}H([]),Z()},V=p.filter(e=>{let t=e.name.toLowerCase().includes(_.toLowerCase()),l=e.name.startsWith(".");return t&&(!q||!l)});return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50 rounded shadow overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 border-b bg-white sticky top-0 z-10",children:[(0,r.jsx)("button",{className:"icon-btn",onClick:()=>{"/"!==s&&x("/"+s.split("/").filter(Boolean).slice(0,-1).join("/"))},disabled:"/"===s,title:"Back",children:(0,r.jsx)(v,{className:"w-5 h-5"})}),(0,r.jsx)("button",{className:"icon-btn",onClick:Z,title:"Refresh",children:(0,r.jsx)(w.A,{className:"w-5 h-5"})}),(0,r.jsx)("button",{className:"icon-btn",onClick:()=>{x("/home")},title:"Home",children:(0,r.jsx)(b,{className:"w-5 h-5"})}),(0,r.jsx)("div",{className:"flex-1 mx-2",children:(0,r.jsx)(h,{path:s,onNavigate:e=>{x(e)}})}),(0,r.jsxs)("div",{className:"relative max-w-xs ml-auto",children:[(0,r.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,r.jsxs)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),(0,r.jsx)("input",{className:"block w-full pl-9 pr-3 py-1.5 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 bg-gray-50 text-sm placeholder-gray-400 transition",placeholder:"Search files...",value:_,onChange:e=>W(e.target.value),"aria-label":"Search files"})]}),(0,r.jsx)("button",{className:"icon-btn ml-2",onClick:()=>I(e=>!e),title:"Show/Hide Hidden",children:q?(0,r.jsx)(N,{className:"w-5 h-5 text-blue-600"}):(0,r.jsx)(j,{className:"w-5 h-5 text-gray-400"})}),(0,r.jsx)("button",{className:"icon-btn ml-2",onClick:()=>J("new-folder"),title:"New Folder",children:(0,r.jsx)(k,{className:"w-5 h-5"})}),(0,r.jsx)("button",{className:"icon-btn",onClick:()=>J("new-file"),title:"New File",children:(0,r.jsx)(g,{className:"w-5 h-5"})}),(0,r.jsx)(m,{currentPath:s,onUpload:Z,setUploadProgress:O})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto px-0 pb-0 bg-white",children:[(0,r.jsxs)("table",{className:"min-w-full text-left select-none",children:[(0,r.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-1 border-b border-gray-200 w-8"}),(0,r.jsx)("th",{className:"px-2 py-1 border-b border-gray-200",children:"Name"}),(0,r.jsx)("th",{className:"px-2 py-1 border-b border-gray-200",children:"Type"}),(0,r.jsx)("th",{className:"px-2 py-1 border-b border-gray-200",children:"Size"}),(0,r.jsx)("th",{className:"px-2 py-1 border-b border-gray-200",children:"Modified"})]})}),(0,r.jsxs)("tbody",{children:["/"!==s&&(0,r.jsx)("tr",{className:"bg-gray-50 cursor-pointer",onClick:()=>{"/"!==s&&x("/"+s.split("/").filter(Boolean).slice(0,-1).join("/"))},children:(0,r.jsx)("td",{className:"px-2 py-1 border-b border-gray-100",colSpan:5,children:".. (Parent Directory)"})}),V.map((e,t)=>(0,r.jsxs)("tr",{className:"group ".concat(t%2==0?"bg-gray-50":""," hover:bg-blue-50 ").concat(z.includes(e.name)?"bg-blue-100":""),onClick:t=>{e.isDir?T(e.name,!0):B({x:t.clientX,y:t.clientY,file:e})},onDoubleClick:t=>{e.isDir&&T(e.name,!0)},onContextMenu:t=>{t.preventDefault(),!z.includes(e.name)&&H([e.name]),B({x:t.clientX,y:t.clientY,file:e})},style:{cursor:"pointer"},children:[(0,r.jsx)("td",{className:"px-2 py-1 border-b border-gray-100",children:(0,r.jsx)("input",{type:"checkbox",checked:z.includes(e.name),onChange:t=>{var l,r;return l=e.name,r=t.target.checked,void H(e=>r?[...e,l]:e.filter(e=>e!==l))},onClick:e=>e.stopPropagation()})}),(0,r.jsxs)("td",{className:"px-2 py-1 border-b border-gray-100 flex items-center",children:[e.isDir?(0,r.jsx)(y.A,{className:"inline w-4 h-4 text-blue-600 mr-1"}):(0,r.jsx)(g,{className:"inline w-4 h-4 text-gray-500 mr-1"}),e.name]}),(0,r.jsx)("td",{className:"px-2 py-1 border-b border-gray-100",children:e.isDir?"Directory":"File"}),(0,r.jsx)("td",{className:"px-2 py-1 border-b border-gray-100",children:e.isDir?"-":e.size}),(0,r.jsx)("td",{className:"px-2 py-1 border-b border-gray-100",children:e.mtime})]},e.name+t))]})]}),U&&(0,r.jsx)(C,{x:null!=(e=U.x)?e:0,y:null!=(t=U.y)?t:0,file:null!=(l=U.file)?l:null,selected:z,onAction:e=>J(e,{file:U.file,selection:z}),onClose:()=>B(null)})]}),(0,r.jsxs)("div",{className:"h-8 px-4 flex items-center text-xs bg-gray-100 border-t text-gray-600",children:[(0,r.jsxs)("span",{children:[V.length," items"]}),z.length>0&&(0,r.jsxs)("span",{className:"ml-4",children:[z.length," selected"]})]})]}),(0,r.jsxs)("aside",{className:"w-32 bg-white border-l flex flex-col py-4",children:[(0,r.jsx)("div",{className:"px-4 pb-2 text-xs font-bold text-gray-700",children:"PLACES"}),S.map(e=>(0,r.jsxs)("button",{className:"flex items-center px-4 py-2 text-sm w-full text-left hover:bg-blue-50 ".concat(s===e.path?"bg-blue-100 text-blue-700 font-semibold":"text-gray-700"),onClick:()=>{x(e.path)},children:[e.icon,e.label]},e.path))]})]})}},1380:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});let r=(0,l(163).A)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},3904:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});let r=(0,l(163).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4477:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return s.createServerReference},findSourceMapURL:function(){return a.findSourceMapURL}});let r=l(3806),a=l(1818),s=l(7197)},8155:(e,t,l)=>{Promise.resolve().then(l.bind(l,1038))}},e=>{e.O(0,[441,964,358],()=>e(e.s=8155)),_N_E=e.O()}]);